!function(t){function h(t,i){this.width=t,this.length=i,this.is2d=!0,this.shape=[t,i],this.value=[],this.seed=function(t){Math.seedrandom(t)},this.change=function(t){this.value=t,this.width=t[0].length,this.length=t.length,this.shape=[t[0].length,t.length]},Array.isArray(t)&&this.change(t),this.input=function(t){for(var i=[],h=[],s=0,e=0;e<this.length;e++){for(var i=[],r=0;r<this.width;r++)i.push(t[s]),s++;h.push(i)}return this.value=h.slice(),h}}function u(t,i){return new h(t,i)}function i(e,r,n){this.input=null,this.output1=null,this.output2=null,this.output=null,this.bias=1,this.error1=null,this.errorD1=null,this.error2=null,this.errorD2=null,this.takeInput=function(t){this.input=u(t)},this.takeOutput=function(t){this.output=u(t)},this.think1=function(){return this.input.dot(this.weight1).fAdd(this.bias).sigmoid()},this.think2=function(){return this.output1.dot(this.weight2).sigmoid()},this.think=function(t){return t.dot(this.weight1).sigmoid().dot(this.weight2).sigmoid()},this.feedForward=function(t){return u(t).dot(this.weight1).sigmoid().dot(this.weight2).sigmoid().value},this.sigmoidDerivative=function(t){return t.lDot(t.fSub(1))},this.train=function(t){var i,h;e=e||this.input.width,r=r||e,n=n||this.output.width,this.weight1=this.weight1||u(r,e).random(),this.weight2=this.weight2||u(n,r).random();for(var s=0;s<t;s++)this.output1=this.think1(),this.output2=this.think2(),this.error2=this.output.subtract(this.output2).sMultiply(2),this.errorD2=this.error2.lDot(this.sigmoidDerivative(this.output2)),this.error1=this.errorD2.dot(this.weight2.T()).sMultiply(2),this.errorD1=this.error1.lDot(this.sigmoidDerivative(this.output1)),i=this.input.T().dot(this.errorD1),h=this.output1.T().dot(this.errorD2),this.weight1.add(i,1),this.weight2.add(h,1)}}Math.seedrandom||(Math.seedrandom=function(t){this._seed=(t=t||1)%2147483647,this._seed<=0&&(this._seed+=2147483646)},Math._random=Math.random,Math.random=function(){return this._seed=16807*this._seed%2147483647,(this._seed-1)/2147483646},Math.deleteRandom=function(){this._seed=void 0,this.seedrandom=void 0,this.random=this._random,this._random=void 0},Math.seedrandom(1)),h.prototype={create:function(t){return new h(t)},add:function(t,i){for(var h=[],s=[],e=0;e<this.length;e++){for(var s=[],r=0;r<this.width;r++)s.push(this.value[e][r]+t.value[e][r]);h.push(s)}return i?(this.change(h),this):this.create(h)},subtract:function(t,i){for(var h=[],s=[],e=0;e<this.length;e++){for(var s=[],r=0;r<this.width;r++)s.push(this.value[e][r]-t.value[e][r]);h.push(s)}return i?(this.change(h),this):this.create(h)},sMultiply:function(t,i){for(var h=[],s=[],e=0;e<this.length;e++){for(var s=[],r=0;r<this.width;r++)s.push(this.value[e][r]*t);h.push(s)}return i?(this.change(h),this):this.create(h)},sDivide:function(t,i){for(var h=[],s=[],e=0;e<this.length;e++){for(var s=[],r=0;r<this.width;r++)s.push(this.value[e][r]/t);h.push(s)}return i?(this.change(h),this):this.create(h)},multiply:function(t,i){for(var h=[],s=[],e=0,r=0;r<this.length;r++){for(var h=[],n=0;n<t.width;n++){for(var e=0,u=0;u<this.width;u++)e+=this.value[r][u]*t.value[u][n];h.push(e)}s.push(h)}return i?(this.change(s),this):this.create(s)},divide:function(t,i){for(var h=[],s=[],e=0,r=0;r<this.length;r++){for(var h=[],n=0;n<t.width;n++){for(var e=0,u=0;u<this.width;u++)e+=this.value[r][u]/t.value[u][n];h.push(e)}s.push(h)}return i?(this.change(s),this):this.create(s)},transpose:function(t){for(var i=[],h=0;h<this.width;h++)i.push([]);for(var s=0;s<this.length;s++)for(var e=0;e<this.width;e++)i[e][s]=this.value[s][e];return t?(this.change(i),this):this.create(i)},sigmoid:function(t){for(var i=[],h=[],s=0;s<this.length;s++){for(var h=[],e=0;e<this.width;e++)h.push(1/(1+Math.pow(Math.E,-this.value[s][e])));i.push(h)}return t?(this.change(i),this):this.create(i)},random:function(t){for(var i=[],h=[],s=0;s<this.length;s++){for(var i=[],e=0;e<this.width;e++)i.push(Math.random()),0;h.push(i)}return t?(this.change(h.slice()),this):this.create(h)},fAdd:function(t,i){for(var h=[],s=[],e=0;e<this.length;e++){for(var s=[],r=0;r<this.width;r++)s.push(t+this.value[e][r]);h.push(s)}return i?(this.change(h),this):this.create(h)},fSub:function(t,i){for(var h=[],s=[],e=0;e<this.length;e++){for(var s=[],r=0;r<this.width;r++)s.push(t-this.value[e][r]);h.push(s)}return i?(this.change(h),this):this.create(h)},zero:function(t){for(var i=[],h=[],s=0;s<this.length;s++){for(var i=[],e=0;e<this.width;e++)i.push(0),0;h.push(i)}return t?(this.change(h.slice()),this):this.create(h)},one:function(t){for(var i=[],h=[],s=0;s<this.length;s++){for(var i=[],e=0;e<this.width;e++)i.push(1),0;h.push(i)}return t?(this.change(h.slice()),this):this.create(h)},fill:function(t,i){for(var h=[],s=[],e=0;e<this.length;e++){for(var h=[],r=0;r<this.width;r++)h.push(t),0;s.push(h)}return i?(this.change(s.slice()),this):this.create(s)},eAdd:function(t){for(var i=0,h=0;h<this.length;h++)i+=this.value[h][0];return t?(this.change([[i]]),this):this.create(output)},dot:function(t,i){return"number"==typeof t?this.sMultiply(t,i):this.multiply(t,i)},T:function(t){return this.transpose(t)},lDot:function(t,i){for(var h=[],s=[],e=0;e<this.length;e++){for(var s=[],r=0;r<this.width;r++)s.push(this.value[e][r]*t.value[e][r]);h.push(s)}return i?(this.change(h),this):this.create(h)},lDivide:function(t,i){for(var h=[],s=[],e=0;e<this.length;e++){for(var s=[],r=0;r<this.width;r++)s.push(this.value[e][r]/t.value[e][r]);h.push(s)}return i?(this.change(h),this):this.create(h)}},"function"==typeof define&&define.amd?(define([],i),define([],u)):"object"==typeof exports?module.exports={nn:i,m:u}:(t.nn=i,t.m=u)}(this);